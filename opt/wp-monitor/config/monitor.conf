#!/bin/bash
# /opt/wp-monitor/config/monitor.conf
# Main configuration file for WordPress Monitor

# WHMCS Database Configuration
WHMCS_DB_HOST="192.168.1.100"
WHMCS_DB_NAME="whmcs"
WHMCS_DB_USER="whmcs_monitor"
WHMCS_DB_PASS="SecurePassword123!"
WHMCS_DB_PORT="3306"

# Your Dedicated Servers
# Format: ["server_name"]="ip_address:ssh_user:ssh_password:server_type"
# server_type can be: cpanel, directadmin, plesk
declare -A SERVERS=(
    ["web01"]="192.168.1.101:root:ServerPass1:cpanel"
    ["web02"]="192.168.1.102:root:ServerPass2:cpanel"
    ["web03"]="192.168.1.103:root:ServerPass3:cpanel"
)

# SSH Configuration
SSH_KEY_PATH="/root/.ssh/monitoring_key"
SSH_TIMEOUT="10"
SSH_MAX_RETRIES="3"

# Monitoring Settings
CHECK_INTERVAL="15"        # Minutes between checks
SITES_PER_BATCH="100"      # Sites to check per run
DELAY_BETWEEN_CHECKS="1"   # Seconds between sites
FAILURE_THRESHOLD="2"       # Failures before alert
MAX_CONCURRENT_CHECKS="5"   # Maximum concurrent domain checks

# Email Reports
REPORT_EMAIL="support@harmonweb.com"
REPORT_FREQUENCY="hourly"  # hourly, daily, or instant
SMTP_SERVER="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="alerts@harmonweb.com"
SMTP_PASS="your_smtp_password"

# Domain Discovery Settings
DISCOVERY_FREQUENCY="24"   # Rediscover domains every 24 hours
CACHE_DOMAINS="true"       # Cache domain list to reduce server load
AUTO_ADD_DOMAINS="true"    # Automatically add newly discovered domains

# Alert Settings
ALERT_ON_FIRST_FAILURE="false"  # Alert immediately or wait for threshold
SUPPRESS_DUPLICATE_ALERTS="3600" # Seconds to wait before sending same alert
MAX_ALERTS_PER_DOMAIN="5"        # Max alerts per domain per day

# Performance Settings
MAX_SSH_CONNECTIONS="10"   # Max simultaneous SSH connections
PHP_TIMEOUT="30"           # PHP script timeout in seconds
CURL_TIMEOUT="10"          # CURL timeout in seconds
CURL_CONNECT_TIMEOUT="5"   # CURL connection timeout in seconds

# Notification Settings
SEND_CLIENT_ALERTS="true"  # Send alerts to clients via WHMCS
SEND_SUPPORT_ALERTS="true" # Send alerts to support team
SEND_SMS_ALERTS="false"    # Send SMS alerts (requires SMS gateway)
SMS_GATEWAY_URL=""         # SMS gateway URL if enabled

# Logging
LOG_LEVEL="INFO"           # DEBUG, INFO, WARNING, ERROR
LOG_RETENTION_DAYS="30"
LOG_TO_SYSLOG="true"       # Also log to system logger

# Paths
BASE_DIR="/opt/wp-monitor"
LOG_DIR="${BASE_DIR}/logs"
STATE_DIR="${BASE_DIR}/state"
REPORT_DIR="${BASE_DIR}/reports"
TEMP_DIR="/tmp/wp-monitor"

# Advanced Settings
VERIFY_SSL="false"         # Verify SSL certificates
FOLLOW_REDIRECTS="true"    # Follow HTTP redirects
CHECK_HTTPS_FIRST="true"   # Try HTTPS before HTTP
USER_AGENT="WordPress-Monitor/1.0 (Monitoring Bot)"